<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G9 PRO - ID: 0nbtruonglek6</title>
    <style>
        :root { --accent: #bc13fe; --cyan: #00f2ff; --p: #00f2ff; --b: #ff4d4d; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Orbitron', sans-serif; }
        body { background: #000; color: #fff; overflow: hidden; height: 100vh; }

        /* 1. ĐĂNG NHẬP / ĐĂNG KÝ */
        #auth-screen { position: fixed; inset: 0; background: radial-gradient(circle, #1a0033 0%, #000 100%); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-box { width: 300px; padding: 30px; border: 2px solid var(--accent); border-radius: 25px; text-align: center; background: rgba(0,0,0,0.8); box-shadow: 0 0 20px var(--accent); }
        input { width: 100%; padding: 12px; margin: 10px 0; background: #111; border: 1px solid #444; color: #fff; border-radius: 10px; outline: none; text-align: center; font-size: 14px; }
        .auth-btn { width: 100%; padding: 12px; background: var(--accent); border: none; color: #fff; border-radius: 10px; cursor: pointer; font-weight: 900; margin-top: 10px; }

        /* 2. CHỌN SẢNH */
        #lobby-screen { display: none; height: 100vh; padding: 20px; flex-direction: column; background: #000; }
        .grid-lobby { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .card { height: 100px; border-radius: 15px; border: 1px solid #333; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 10px; background-size: cover; position: relative; cursor: pointer; }
        .card span { z-index: 2; font-size: 12px; font-weight: 900; text-shadow: 0 0 5px #000; }

        /* 3. CHỌN BÀN */
        #table-screen { display: none; position: fixed; inset: 0; background: #000; z-index: 5000; flex-direction: column; padding: 20px; }
        .table-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; overflow-y: auto; padding: 10px; }
        .table-item { background: #111; border: 1px solid #444; padding: 15px 0; text-align: center; border-radius: 10px; font-size: 10px; color: #fff; }

        /* 4. ROBOT G9 OVERLAY - CÓ NHẬP ĐIỂM */
        #g9-robot-tool { 
            display: none; position: fixed; width: 130px; height: auto; 
            top: 30%; left: 10%; z-index: 9999; cursor: move; touch-action: none;
            background: rgba(0,0,0,0.4); border-radius: 20px; padding: 10px;
        }
        
        .score-input-area { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .mini-score { width: 50px; height: 50px; background: #000; border: 1px solid #444; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 900; cursor: pointer; }
        
        .robot-img { width: 80px; height: 80px; margin: 0 auto; background: url('https://i.postimg.cc/1zfRLs85/lv-0-20260225210308.png') center/contain no-repeat; filter: drop-shadow(0 0 8px var(--accent)); transition: 0.3s; }
        
        .res-bubble { 
            position: absolute; top: -60px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.95); border: 2px solid var(--accent); padding: 5px 15px; 
            border-radius: 15px; display: none; text-align: center; min-width: 100px;
        }

        /* NUMPAD MINI */
        #pop-num { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 11000; align-items: center; justify-content: center; }
        .num-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; background: #111; padding: 20px; border-radius: 20px; border: 1px solid var(--accent); }
        .n-btn { width: 50px; height: 50px; background: #000; color: #fff; border: 1px solid #333; border-radius: 10px; font-size: 20px; }

        .active-scan .robot-img { transform: scale(1.1); filter: drop-shadow(0 0 20px var(--cyan)); }
        @keyframes rot { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div class="auth-box">
            <h2 style="color:var(--accent)">G9 SYSTEM</h2>
            <input type="text" placeholder="Tên đăng nhập">
            <input type="password" placeholder="Mật khẩu">
            <button class="auth-btn" onclick="showLobby()">ĐĂNG NHẬP / ĐĂNG KÝ</button>
            <p style="font-size: 8px; color: #555; margin-top: 10px;">ID: 0nbtruonglek6 - VER 12.0</p>
        </div>
    </div>

    <div id="lobby-screen">
        <h3 style="text-align:center; color:var(--accent); font-size: 14px;">5RR99 - CHỌN SẢNH</h3>
        <div class="grid-lobby">
            <div class="card" onclick="showTables('DREAM')" style="background-image:url('https://i.postimg.cc/FswJDnC7/1771937103914.jpg')"><span>DREAM</span></div>
            <div class="card" onclick="showTables('SEXY')" style="background-image:url('https://i.postimg.cc/0jW7kkCX/1771937107854.jpg')"><span>SEXY</span></div>
            <div class="card" onclick="showTables('WM')" style="background-image:url('https://i.postimg.cc/t7GpVPDp/1771937162161.jpg')"><span>WM</span></div>
            <div class="card" onclick="showTables('SA')" style="background-image:url('https://i.postimg.cc/bvgrc6gT/1771937152310.jpg')"><span>SA</span></div>
        </div>
    </div>

    <div id="table-screen">
        <h4 id="lobby-title" style="text-align:center; margin-bottom:15px; color:yellow; font-size: 12px;"></h4>
        <div class="table-grid" id="table-list"></div>
        <button onclick="backToLobby()" style="background:none; border:none; color:#666; margin-top:20px; width:100%; font-size: 10px;">QUAY LẠI</button>
    </div>

    <div id="g9-robot-tool" onmousedown="dragStart(event)" ontouchstart="dragStart(event)">
        <div class="score-input-area">
            <div class="mini-score" id="p-box" style="color:var(--p);" onclick="openNum('P')">0</div>
            <div class="mini-score" id="b-box" style="color:var(--b);" onclick="openNum('B')">0</div>
        </div>

        <div class="robot-img"></div>
        
        <div class="res-bubble" id="res-bubble">
            <div style="font-size:8px; color:#aaa">ID: 0nbtruonglek6</div>
            <div id="res-val" style="font-size:30px; font-weight:900">...</div>
            <div id="res-rate" style="font-size:8px; color:var(--cyan)">0%</div>
        </div>
        
        <p style="font-size: 7px; color: #555; text-align: center; margin-top: 5px;">HOLD TO MOVE</p>
    </div>

    <div id="pop-num">
        <div class="num-grid" id="n-pad"></div>
    </div>

<script>
    let van = 1; let side = ''; let pS = null; let bS = null;
    const robot = document.getElementById('g9-robot-tool');

    function speak(t) { window.speechSynthesis.cancel(); let m = new SpeechSynthesisUtterance(t); m.lang = 'vi-VN'; window.speechSynthesis.speak(m); }
    
    function showLobby() {
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('lobby-screen').style.display = 'flex';
        speak("Chào mừng anh trường l k 6.");
    }

    function showTables(lobbyName) {
        document.getElementById('lobby-screen').style.display = 'none';
        document.getElementById('table-screen').style.display = 'flex';
        document.getElementById('lobby-title').innerText = lobbyName + " - CHỌN BÀN 1-C16";
        const list = document.getElementById('table-list');
        list.innerHTML = '';
        for(let i=1; i<=26; i++) {
            let n = i <= 10 ? "BÀN " + i : "BÀN C" + (i-10 < 10 ? "0"+(i-10) : (i-10));
            let d = document.createElement('div'); d.className = 'table-item'; d.innerText = n;
            d.onclick = () => { document.getElementById('table-screen').style.display = 'none'; robot.style.display = 'block'; speak("Đã vào " + n); };
            list.appendChild(d);
        }
    }

    function backToLobby() { document.getElementById('table-screen').style.display = 'none'; document.getElementById('lobby-screen').style.display = 'flex'; }

    // NUMPAD LOGIC
    const pad = document.getElementById('n-pad');
    for(let i=0; i<=9; i++) {
        let b = document.createElement('button'); b.className = 'n-btn'; b.innerText = i;
        b.onclick = () => {
            if(side === 'P') { pS = i; document.getElementById('p-box').innerText = i; }
            else { bS = i; document.getElementById('b-box').innerText = i; }
            document.getElementById('pop-num').style.display = 'none';
            if(pS !== null && bS !== null) runAI();
        };
        pad.appendChild(b);
    }
    function openNum(s) { side = s; document.getElementById('pop-num').style.display = 'flex'; }

    // DRAG LOGIC
    function dragStart(e) {
        if(e.target.className === 'mini-score') return;
        let event = e.type === 'touchstart' ? e.touches[0] : e;
        let ox = event.clientX - robot.offsetLeft;
        let oy = event.clientY - robot.offsetTop;
        function move(e) {
            let ev = e.type === 'touchmove' ? e.touches[0] : e;
            robot.style.left = ev.clientX - ox + 'px';
            robot.style.top = ev.clientY - oy + 'px';
        }
        document.onmousemove = document.ontouchmove = move;
        document.onmouseup = document.ontouchend = () => { document.onmousemove = document.ontouchmove = null; };
    }

    function runAI() {
        robot.classList.add('active-scan');
        const bubble = document.getElementById('res-bubble');
        const resVal = document.getElementById('res-val');
        bubble.style.display = 'block';
        resVal.innerText = "...";
        speak("Đang tính toán 10 triệu bộ cầu");

        setTimeout(() => {
            // CÔNG THỨC CHẴN LẺ CỦA ANH
            let bCalc = ([0,2,4,6,8].includes(bS)) ? (bS + 1) : bS;
            let pCalc = (van % 2 === 0) ? (pS - 1) : pS;
            let logic = (bCalc * 3) + (pCalc * 2) + van;
            let final = (Math.abs(logic) % 2 === 0) ? "B" : "P";
            let rate = 91 + (Math.random() * 8.5);

            resVal.innerText = final;
            resVal.style.color = final === 'P' ? "var(--cyan)" : "var(--accent)";
            document.getElementById('res-rate').innerText = rate.toFixed(1) + "% MATCH";
            speak("ID trường l k 6 báo lệnh " + (final === 'P' ? "Con" : "Cái"));
            
            pS = null; bS = null; van++;
            document.getElementById('p-box').innerText = "0";
            document.getElementById('b-box').innerText = "0";
            setTimeout(() => { robot.classList.remove('active-scan'); }, 2000);
        }, 2500);
    }
</script>
</body>
    </html>
    
